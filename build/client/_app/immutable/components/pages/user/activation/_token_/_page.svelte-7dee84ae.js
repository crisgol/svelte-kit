import{S as F,i as J,s as M,k as u,a as C,q as S,O as z,l as f,h as d,c as T,m as g,r as D,n as m,p as N,D as i,b as P,E as G,u as K,A as R,F as L}from"../../../../../chunks/index-5031b6ad.js";import{a as Q,n as j}from"../../../../../chunks/api-c0e3e547.js";import{p as W}from"../../../../../chunks/stores-640f57d2.js";import{g as X}from"../../../../../chunks/navigation-d40c5dfb.js";function O(r){this.message=r}O.prototype=new Error,O.prototype.name="InvalidCharacterError";var B=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(r){var e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new O("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,t,n=0,a=0,s="";t=e.charAt(a++);~t&&(o=n%4?64*o+t:t,n++%4)?s+=String.fromCharCode(255&o>>(-2*n&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return s};function Y(r){var e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(o){return decodeURIComponent(B(o).replace(/(.)/g,function(t,n){var a=n.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(e)}catch{return B(e)}}function b(r){this.message=r}function Z(r,e){if(typeof r!="string")throw new b("Invalid token specified");var o=(e=e||{}).header===!0?0:1;try{return JSON.parse(Y(r.split(".")[o]))}catch(t){throw new b("Invalid token specified: "+t.message)}}b.prototype=new Error,b.prototype.name="InvalidTokenError";function ee(r){let e,o,t,n,a,s,c,_,w,y,A,E,h,k,I,V;return{c(){e=u("meta"),o=C(),t=u("div"),n=u("div"),a=u("div"),s=u("div"),c=u("h5"),_=S("Activate account for "),w=S(r[0]),y=C(),A=u("hr"),E=C(),h=u("button"),k=S("Activate Account"),this.h()},l(l){const p=z('[data-svelte="svelte-r1h90o"]',document.head);e=f(p,"META",{name:!0,content:!0}),p.forEach(d),o=T(l),t=f(l,"DIV",{class:!0});var q=g(t);n=f(q,"DIV",{class:!0});var U=g(n);a=f(U,"DIV",{class:!0,style:!0});var $=g(a);s=f($,"DIV",{class:!0});var v=g(s);c=f(v,"H5",{});var x=g(c);_=D(x,"Activate account for "),w=D(x,r[0]),x.forEach(d),y=T(v),A=f(v,"HR",{}),E=T(v),h=f(v,"BUTTON",{class:!0});var H=g(h);k=D(H,"Activate Account"),H.forEach(d),v.forEach(d),$.forEach(d),U.forEach(d),q.forEach(d),this.h()},h(){document.title="Account Activation",m(e,"name","robots"),m(e,"content","noindex, nofollow"),m(h,"class","btn btn-primary btn-lg"),m(s,"class","card-body text-center"),m(a,"class","card"),N(a,"width","50em"),N(a,"max-width","50em"),m(n,"class","d-flex mt-5 justify-content-center d-block"),m(t,"class","container")},m(l,p){i(document.head,e),P(l,o,p),P(l,t,p),i(t,n),i(n,a),i(a,s),i(s,c),i(c,_),i(c,w),i(s,y),i(s,A),i(s,E),i(s,h),i(h,k),I||(V=G(h,"click",r[1]),I=!0)},p(l,[p]){p&1&&K(w,l[0])},i:R,o:R,d(l){d(e),l&&d(o),l&&d(t),I=!1,V()}}}function te(r,e,o){let t;L(r,W,c=>o(2,t=c));let{token:n}=t.params,a="";return n&&(a=Z(n).email),[a,async()=>{try{const c=await Q("POST","user/register",{token:n});c&&(j.push(c.message,"success"),await X("/login"))}catch(c){j.push(c.message)}}]}class se extends F{constructor(e){super(),J(this,e,te,ee,M,{})}}export{se as default};
