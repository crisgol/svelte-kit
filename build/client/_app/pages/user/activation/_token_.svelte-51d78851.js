import{S as z,i as M,s as P,e as u,k as C,t as S,U as F,c as f,d,m as T,a as g,h as D,b as m,f as q,H as i,g as B,I as G,j as K,E as J,J as L}from"../../../chunks/index-30349cbd.js";import{a as Q,n as N}from"../../../chunks/Noti-2cff4241.js";import{p as W}from"../../../chunks/stores-96b8dbae.js";import{g as X}from"../../../chunks/navigation-0e6511d1.js";import"../../../chunks/variables-86731e6d.js";import"../../../chunks/index-dbf04213.js";import"../../../chunks/singletons-d1fb5791.js";function U(r){this.message=r}U.prototype=new Error,U.prototype.name="InvalidCharacterError";var R=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,"");if(t.length%4==1)throw new U("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,e,o=0,a=0,c="";e=t.charAt(a++);~e&&(n=o%4?64*n+e:e,o++%4)?c+=String.fromCharCode(255&n>>(-2*o&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return c};function Y(r){var t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(R(n).replace(/(.)/g,function(e,o){var a=o.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(t)}catch{return R(t)}}function b(r){this.message=r}function Z(r,t){if(typeof r!="string")throw new b("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(Y(r.split(".")[n]))}catch(e){throw new b("Invalid token specified: "+e.message)}}b.prototype=new Error,b.prototype.name="InvalidTokenError";function tt(r){let t,n,e,o,a,c,s,y,w,_,E,A,p,k,I,O;return{c(){t=u("meta"),n=C(),e=u("div"),o=u("div"),a=u("div"),c=u("div"),s=u("h5"),y=S("Activate account for "),w=S(r[0]),_=C(),E=u("hr"),A=C(),p=u("button"),k=S("Activate Account"),this.h()},l(l){const h=F('[data-svelte="svelte-9z5ylk"]',document.head);t=f(h,"META",{name:!0,content:!0}),h.forEach(d),n=T(l),e=f(l,"DIV",{class:!0});var V=g(e);o=f(V,"DIV",{class:!0});var H=g(o);a=f(H,"DIV",{class:!0,style:!0});var $=g(a);c=f($,"DIV",{class:!0});var v=g(c);s=f(v,"H5",{});var x=g(s);y=D(x,"Activate account for "),w=D(x,r[0]),x.forEach(d),_=T(v),E=f(v,"HR",{}),A=T(v),p=f(v,"BUTTON",{class:!0});var j=g(p);k=D(j,"Activate Account"),j.forEach(d),v.forEach(d),$.forEach(d),H.forEach(d),V.forEach(d),this.h()},h(){document.title="Account Activation",m(t,"name","robots"),m(t,"content","noindex, nofollow"),m(p,"class","btn btn-primary btn-lg"),m(c,"class","card-body text-center"),m(a,"class","card"),q(a,"width","50em"),q(a,"max-width","50em"),m(o,"class","d-flex mt-5 justify-content-center d-block"),m(e,"class","container")},m(l,h){i(document.head,t),B(l,n,h),B(l,e,h),i(e,o),i(o,a),i(a,c),i(c,s),i(s,y),i(s,w),i(c,_),i(c,E),i(c,A),i(c,p),i(p,k),I||(O=G(p,"click",r[1]),I=!0)},p(l,[h]){h&1&&K(w,l[0])},i:J,o:J,d(l){d(t),l&&d(n),l&&d(e),I=!1,O()}}}function et(r,t,n){let e;L(r,W,s=>n(2,e=s));let{token:o}=e.params,a="";return o&&(a=Z(o).email),[a,async()=>{try{const s=await Q("POST","user/register",{token:o});if(s.status>=400)throw new Error(s.message);N.push(s.message,"success"),await X("/login")}catch(s){N.push(s.message)}}]}class lt extends z{constructor(t){super(),M(this,t,et,tt,P,{})}}export{lt as default};
