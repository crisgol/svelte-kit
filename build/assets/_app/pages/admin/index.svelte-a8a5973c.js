import{S as s,i as a,s as t,e,k as n,j as r,l as c,V as o,c as i,d as l,n as m,m as f,b as h,E as d,f as u,o as v,u as p,w as $,x as E,v as k,r as g,t as b,a as w,g as V,h as j,F as D}from"../../chunks/vendor-23c8162e.js";import{T as I}from"../../chunks/Tabs-c7f83f7f.js";import{a as x,n as y}from"../../chunks/Noti-91c2ae11.js";import{L}from"../../chunks/LoadingSpinner-fa8d942c.js";import"../../chunks/stores-36a9b970.js";import"../../chunks/variables-e34b2610.js";function T(s){let a,t,r,c,o,f,v,p,$,E,k,g;return{c(){a=e("div"),t=e("div"),r=e("div"),c=e("div"),o=e("div"),f=e("div"),v=e("div"),p=e("h3"),$=b(s[1]),E=n(),k=e("label"),g=b("Users"),this.h()},l(e){a=i(e,"DIV",{class:!0});var n=w(a);t=i(n,"DIV",{class:!0});var h=w(t);r=i(h,"DIV",{class:!0});var d=w(r);c=i(d,"DIV",{class:!0});var u=w(c);o=i(u,"DIV",{class:!0});var b=w(o);f=i(b,"DIV",{class:!0});var j=w(f);v=i(j,"DIV",{class:!0});var D=w(v);p=i(D,"H3",{});var I=w(p);$=V(I,s[1]),I.forEach(l),E=m(D),k=i(D,"LABEL",{});var x=w(k);g=V(x,"Users"),x.forEach(l),D.forEach(l),j.forEach(l),b.forEach(l),u.forEach(l),d.forEach(l),h.forEach(l),n.forEach(l),this.h()},h(){h(v,"class","text-center"),h(f,"class","card-body"),h(o,"class","card"),h(c,"class","col-sm"),h(r,"class","row"),h(t,"class","container"),h(a,"class","container")},m(s,e){u(s,a,e),d(a,t),d(t,r),d(r,c),d(c,o),d(o,f),d(f,v),d(v,p),d(p,$),d(v,E),d(v,k),d(k,g)},p(s,a){2&a&&j($,s[1])},i:D,o:D,d(s){s&&l(a)}}}function A(s){let a,t;return a=new L({}),{c(){r(a.$$.fragment)},l(s){f(a.$$.fragment,s)},m(s,e){v(a,s,e),t=!0},p:D,i(s){t||(E(a.$$.fragment,s),t=!0)},o(s){p(a.$$.fragment,s),t=!1},d(s){k(a,s)}}}function N(s){let a,t,b,w,V,j,D,x;b=new I({});const y=[A,T],L=[];function N(s,a){return s[0]?0:1}return V=N(s),j=L[V]=y[V](s),{c(){a=e("meta"),t=n(),r(b.$$.fragment),w=n(),j.c(),D=c(),this.h()},l(s){const e=o('[data-svelte="svelte-s8heis"]',document.head);a=i(e,"META",{name:!0,content:!0}),e.forEach(l),t=m(s),f(b.$$.fragment,s),w=m(s),j.l(s),D=c(),this.h()},h(){document.title="Admin Panel",h(a,"name","robots"),h(a,"content","noindex, nofollow")},m(s,e){d(document.head,a),u(s,t,e),v(b,s,e),u(s,w,e),L[V].m(s,e),u(s,D,e),x=!0},p(s,[a]){let t=V;V=N(s),V===t?L[V].p(s,a):(g(),p(L[t],1,1,(()=>{L[t]=null})),$(),j=L[V],j?j.p(s,a):(j=L[V]=y[V](s),j.c()),E(j,1),j.m(D.parentNode,D))},i(s){x||(E(b.$$.fragment,s),E(j),x=!0)},o(s){p(b.$$.fragment,s),p(j),x=!1},d(s){l(a),s&&l(t),k(b,s),s&&l(w),L[V].d(s),s&&l(D)}}}async function S({session:s}){return s.user&&"admin"===s.user.role&&s.authenticated?{props:{token:s.token}}:{status:302,redirect:"/"}}function U(s,a,t){let e,{token:n}=a,r=!0;return(async()=>{try{const s=await x("GET","admin/stats",{},n);if(s.status>=400)throw t(0,r=!1),new Error(s.message);t(0,r=!1),t(1,e=Number(s))}catch(s){t(0,r=!1),y.push(s.message)}})(),s.$$set=s=>{"token"in s&&t(2,n=s.token)},[r,e,n]}class B extends s{constructor(s){super(),a(this,s,U,N,t,{token:2})}}export{B as default,S as load};
